<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<title>Geoloc</title>
	<link rel="stylesheet" href="loader.css">

	<script>

		function displayPosition(position)
		{
			document.getElementById('loader').style.display = 'none';
			var input ='';
			for(key in position.coords){
				if(position.coords[key])
					input += key+' : '+position.coords[key]+'<br/>';
			}
			document.getElementById('position').innerHTML = input;
		}

		function displayError(err){
			if(err){
				alert(err.message);
			}
		}

		function checkForSpeed(position)
		{
			if(position.coords.speed == null){
				console.log('clearWatch');
				navigator.geolocation.clearWatch(geoloc);
			}
				displayPosition(position);
		}

		if(navigator.geolocation){
			var geoloc = navigator.geolocation.watchPosition(checkForSpeed, displayError);
		}
		else{
			alert('Votre navigateur ne prend pas en compte la g√©olocalisation HTML 5.');
		}
	</script>

	<style>
	</style>

</head>
<body>
	<div id="loader"></div>
	<div id="position"></div>
</body>
</html>